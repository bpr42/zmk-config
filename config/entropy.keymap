/*
 * Copyright (c) 2021 Josh Johnson
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/rgb.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/outputs.h>

#define QWER 0
#define MOD  1
#define FUNC 2

// "DNP" Denotes where a key can be placed but is not, " " is not a valid key position
// |   0   |   1   |   2   |   3   |   4   |   5   |   6   |   7   |   8   |   9   |   10  |   11  |   12  |   13  |   14  |   15  |   16  |   17  |   18  |   19  |
// |---------------------------------------------------------------------------------------------------------------------------------------------------------------|
// | MUTE  | HOME  | TBD   | TBD   | ESC   | F1    | F2    | F3    | F4    | F5    | F6    | F7    | F8    | F9    | F10   | F11   | F12   | INSRT | HOME  | PAUSE |
// | MNUS  | MUL   | DIV   | NLOCK | ~     | 1     | 2     | 3     | 4     | 5     | 6     | 7     | 8     | 9     | 0     | -     |  =    | DEL   | END   | PSCRN |
// | PLUS  | 7     | 8     | 9     | TAB   |       | Q     | W     | E     | R     | T     | Y     | U     | I     | O     | P     | [     |  ]    | BSPC  | PGUP  |
// | DNP   | 4     | 5     | 6     | LCTRL |       | A     | S     | D     | F     | G     | H     | J     | K     | L     | ;     | '     | ENTER |       | PGDN  |
// | ENTER | 1     | 2     | 3     |       | SHIFT | Z     | X     | C     | V     | B     | N     | M     | ,     | .     | /     |       | SHFT  | UP    | FUNC  |
// | DNP   | DOT   | DNP   | 0     | CTRL  | GUI   |       | ALT   |       | LSPCE | SPACE |       | RSPC  |       | ALT   | DNP   | CTRL  | LEFT  | DOWN  | RIGHT |




/ {
    macros {
        M1: M1 {
            label = "ZM_M1";
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings
                = <&macro_press &kp LCTRL>
                , <&macro_tap &kp EQUAL>
                , <&macro_release &kp LCTRL>
                ;
        };
        M2: M2 {
            label = "ZM_M2";
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings
                = <&macro_press &kp LCTRL>
                , <&macro_tap &kp MINUS>
                , <&macro_release &kp LCTRL>
                ;
        };
    };
        keymap {
                compatible = "zmk,keymap";

                qwerty_layer_0 {

        bindings = <       
//  |   0        |   1           |   2         |   3        |   4     |   5     |   6  |   7     |   8  |   9         |   10    |   11 |   12    |   13   |   14   |   15    |   16    |   17     |   18   |   19          
    &kp C_MUTE   &trans          &kp HOME      &trans       &kp ESC   &kp F1    &kp F2 &kp F3    &kp F4 &kp F5        &kp F6    &kp F7 &kp F8    &kp F9    &kp F10  &kp F11   &kp F12   &kp INSERT &kp DEL  &kp C_PP
    &kp KP_MINUS &kp KP_MULTIPLY &kp KP_DIVIDE &kp KP_NUM   &kp GRAVE &kp N1    &kp N2 &kp N3    &kp N4 &kp N5        &kp N6    &kp N7 &kp N8    &kp N9    &kp N0   &kp MINUS &kp EQUAL &kp DEL    &kp END  &kp PSCRN
    &trans       &kp KP_N7       &kp KP_N8     &kp KP_N9    &kp TAB             &kp Q  &kp W     &kp E  &kp R         &kp T     &kp Y  &kp U     &kp I     &kp O    &kp P     &kp LBKT  &kp RBKT   &kp BSPC &kp PG_UP
    &kp KP_PLUS  &kp KP_N4       &kp KP_N5     &kp KP_N6    &kp LCTRL           &kp A  &kp S     &kp D  &kp F         &kp G     &kp H  &kp J     &kp K     &kp L    &kp SEMI  &kp APOS  &kp ENTER           &kp PG_DN
    &trans       &kp KP_N1       &kp KP_N2     &kp KP_N3              &kp LSHFT &kp Z  &kp X     &kp C  &kp V         &kp B     &kp N  &kp M     &kp COMMA &kp DOT  &kp FSLH            &kp RSHFT  &kp UP   &mo FUNC  
    &kp KP_ENTER &kp KP_DOT      &trans        &kp KP_N0    &kp LCTRL &kp LGUI         &kp LALT         &trans        &kp SPACE        &trans            &kp RALT &trans    &kp RCTRL &kp LEFT   &kp DOWN &kp RIGHT
            >;

            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN &inc_dec_kp &M1 &M2 &inc_dec_kp PG_DN PG_UP &inc_dec_kp C_VOL_DN C_VOL_UP>;
        };

                mod_layer_1 {

        bindings = <       
//  |   0        |   1           |   2         |   3       |   4     |   5     |   6        |   7        |   8      |   9      |   10     |   11 |   12    |   13   |   14   |   15    |   16    |   17     |   18     |   19          
    &trans       &trans          &trans        &trans      &trans    &trans    &trans       &trans       &trans     &trans     &trans     &trans &trans    &trans   &trans   &trans    &trans    &trans     &trans     &trans   
    &trans       &trans          &trans        &trans      &trans    &trans    &trans       &trans       &trans     &trans     &trans     &trans &trans    &trans   &trans   &trans    &trans    &trans     &trans     &trans 
    &trans       &trans          &trans        &trans      &trans              &trans       &trans       &trans     &trans     &trans     &trans &trans    &trans   &trans   &trans    &trans    &trans     &trans     &trans
    &trans       &trans          &trans        &trans      &trans              &trans       &trans       &trans     &trans     &trans     &trans &trans   &trans    &trans   &trans    &trans    &trans                &trans
    &trans       &trans          &trans        &trans                &trans    &trans       &trans       &trans     &trans     &trans     &trans &trans    &trans   &trans   &trans              &trans     &trans     &trans  
    &trans       &trans          &trans        &trans      &trans    &trans                 &trans                  &trans     &trans            &trans             &trans   &trans    &trans    &trans     &trans     &trans
            >;

            sensor-bindings = <&inc_dec_kp C_VOL_DN C_VOL_UP &inc_dec_kp C_VOL_DN C_VOL_UP &inc_dec_kp C_VOL_DN C_VOL_UP &inc_dec_kp C_VOL_DN C_VOL_UP>;
        };

                func_layer_2 {

        bindings = <       
//  |   0        |   1           |   2           |   3           |   4        |   5        |   6        |   7        |   8        |   9        |   10    |   11 |   12    |   13   |   14   |   15    |   16    |   17     |   18     |   19          
    &out OUT_TOG &bt BT_CLR      &bt BT_SEL 0    &bt BT_SEL 1    &trans       &trans       &trans       &trans       &trans       &trans       &trans    &trans &trans    &trans   &trans   &trans    &trans    &trans     &trans     &bootloader   
    &trans       &trans          &trans          &trans          &trans       &trans       &trans       &trans       &trans       &trans       &trans    &trans &trans    &trans   &trans   &trans    &trans    &trans     &trans     &trans
    &trans       &rgb_ug RGB_TOG &rgb_ug RGB_HUD &rgb_ug RGB_HUI &trans                    &trans       &trans       &trans       &trans       &trans    &trans &trans    &trans   &trans   &trans    &trans    &trans     &trans     &trans
    &trans       &rgb_ug RGB_EFF &rgb_ug RGB_SAD &rgb_ug RGB_SAI &trans                    &trans       &trans       &trans       &trans       &trans    &trans &trans    &trans   &trans   &trans    &trans    &trans                &trans
    &trans       &rgb_ug RGB_EFR &rgb_ug RGB_BRD &rgb_ug RGB_BRI              &trans       &trans       &trans       &trans       &trans       &trans    &trans &trans    &trans   &trans   &trans              &trans     &trans     &trans  
    &trans       &trans          &trans          &trans          &trans       &trans                    &trans                    &trans       &trans           &trans             &trans   &trans    &trans    &trans     &trans     &trans
            >;

            sensor-bindings = <&inc_dec_kp C_VOL_DN C_VOL_UP &inc_dec_kp C_VOL_DN C_VOL_UP &inc_dec_kp C_VOL_DN C_VOL_UP &inc_dec_kp C_VOL_DN C_VOL_UP>;
        };
        };
};
